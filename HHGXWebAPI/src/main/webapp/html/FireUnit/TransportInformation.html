<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <!-- 主要框架引用-->
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../fonts/icon/iconfont.css"/>
    <script type="text/javascript" src="../../js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/handlebars.js"></script>

    <!-- 公共样式引用-->
    <link rel="stylesheet" href="../../css/style.css"/>

    <!-- 单页面样式-->
    <link rel="stylesheet" href="../../css/FireUnit/TransportInformation.css"/>

    <!--下面是时间的插件-->
    <link href="../../plug/datepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
</head>
<body>
<div class="main_title">
    <a>消防设施情况</a>
    <span>></span>
    <a href="./TransportInformation.html" class="titlt_active">传输设备信息</a>
</div>
    <div class="container newMain_page">
        <div class="row" id="firstDiv">
            <span style="font-size: 24px;color: #4A90E2;">传输设备</span>
            <button type="button" id="addTransportEquipment" class="myBtn">新增</button>
        </div>

        <div class="row" style="min-height: 600px">
            <table class="table table-bordered" id="transportEquipmentTb">
                <tr class="fontBlue">
                    <th>传输设备地址</th>
                    <th>状态</th>
                    <th>状态时间</th>
                    <th>生产厂商</th>
                    <th>所连控制器生产厂商</th>
                    <th>所连控制器型号</th>
                    <th>所在建筑和系统</th>
                    <!--<th>所在系统</th>-->
                    <th>操作</th>
                </tr>
                <tbody id="transportEquipmentTbody">

                </tbody>
            </table>
        </div>
        <!--放分页的地方-->
        <div class="col-sm-12" id="in_paging"></div>
    </div>


    <!-- 模态框（点击各种按钮添加） -->
    <div class="modal fade" id="transportEquipmentModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog" id="transportEquipmentDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <!--<h4 class="modal-title">新增消防队装备</h4>-->
                </div>
                <div class="modal-body" id="transportEquipmentBody" style="height: 530px;overflow-y: auto">

                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="addModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--首页的删除模态框-->
    <div class="modal fade" id="transportDeleteModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog" id="transportDeleteDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">删除传输设备</h3>
                </div>
                <div class="modal-body" id="transportDeleteBody">
                    <h3 style="text-align: center">是否删除该传输设备</h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="deleteModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框（点击模态框里面的添加按钮） -->
    <div class="modal fade" id="addTransportModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog" id="addTransportDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">添加关联系统:</h4>
                </div>
                <div class="modal-body" id="addTransportBody">

                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="addAddModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>


    <!--下面是从后台取的数据渲染-->
    <!--下面是添加模态框里面的添加按钮返回的数据-->
    <script id="addAddModalData" type="text/html">
        <div class="row">
            <div class="form-group col-sm-12 addTransportEquipmentDiv">
                <label class="col-sm-4 control-label" for="dwbm">设备所在建筑物及系统：</label>
                <div class="col-sm-8">
                    <select id="addAddSelect" class="selectpicker show-tick form-control" data-live-search="true">
                        {{#each DataBag}}
                            <option siteid="{{siteid}}" tiSysType="{{tiSysType}}" sitename="{{sitename}}" vSysdesc="{{vSysdesc}}">{{sitename}}({{vSysdesc}})</option>
                        {{/each}}
                    </select>
                </div>
            </div>
            <div class="form-group col-sm-12 addTransportEquipmentDiv">
                <label class="col-sm-4 control-label" for="dwbm">请输入系统地址：</label>
                <div class="col-sm-8">
                    <input id="addAddAddress" onkeyup="javascript:this.value=this.value.replace(/[^\d\.]/g,'')" type="text" class="form-control"/>
                </div>
            </div>
        </div>
    </script>

    <!--下面是点击查看详情的后台数据内容-->
    <script id="detailTable" type="text/html">
        <table class="table table-bordered detailTables">
            <tr>
                <th>建筑物</th>
                <th>系统</th>
                <th>地址</th>
            </tr>
            {{#each DataBag}}
            {{#each FireSysList}}
                <tr>
                    <td>{{sitename}}</td>
                    <td>{{vSysdesc}}</td>
                    <td>{{Sysaddress}}</td>
                </tr>
            {{/each}}
            {{/each}}
        </table>

        <table class="table table-bordered detailTables">
            {{#each DataBag}}
            <tr>
                <td>传输设备地址</td>
                <td>{{Gatewayaddress}}</td>
                <td>状态</td>
                <td>{{ynonline}}</td>
            </tr>
            <tr>
                <td>状态时间</td>
                <td>{{onlinetime}}</td>
                <td>生产厂商</td>
                <td>{{Manufacturer}}</td>
            </tr>
            <tr>
                <td>型号</td>
                <td>{{Model}}</td>
                <td>生产日期</td>
                <td>{{productdate}}</td>
            </tr>
            <tr>
                <td>安装日期</td>
                <td>{{setupdate}}</td>
                <td>所连控制器生产厂商</td>
                <td>{{ControlorManufacture}}</td>
            </tr>
            <tr>
                <td>所连接控制器型号</td>
                <td>{{ControlorMode}}</td>
                <td>与控制器连接状态</td>
                <td>{{ConnectControlerState}}</td>
            </tr>
            <tr>
                <td>主电状态</td>
                <td>{{MainPower}}</td>
                <td>备电状态</td>
                <td>{{BackupPower}}</td>
            </tr>
            <tr>
                <td>监测连接线状态</td>
                <td>{{CableState}}</td>
                <td>备注</td>
                <td>{{memo}}</td>
            </tr>
            <tr>
                <td>软件版本</td>
                <td>{{gatewayversion}}</td>
                <td>版本更新</td>
                <td>{{versionupdatedate}}</td>
            </tr>
            <tr>
                <td>工作状态</td>
                <td>{{workState}}</td>
                <td>记录时间</td>
                <td>{{annalTime}}</td>
            </tr>
            {{/each}}
        </table>

    </script>

    <!--点击修改的时候从后台渲染数据-->
    <script id="changeTransportData" type="text/html">
        <div class="row">
            <div class="form-group col-sm-12 changeTransportDiv">
                <label class="col-sm-4 control-label" for="dwbm">添加设备关联的系统：</label>
                <div class="col-sm-8">
                    <button type="button" type="button" id="modalChangeBtn" class="myBtn">添加</button>
                </div>
            </div>
            <table class="table table-bordered" id="changeTransportTb">
                <tr>
                    <th>建筑物</th>
                    <th>系统</th>
                    <th>地址</th>
                    <th>操作</th>
                </tr>
                <tbody id="changeTransportTbody">

                </tbody>
            </table>
            <form enctype="multipart/form-data" id="changeModalForm">
                {{#each DataBag}}
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">传输设备地址：</label>
                    <div class="col-sm-8">
                        <input value="{{newGatewayaddress}}" name="newGatewayaddress" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">生产厂商：</label>
                    <div class="col-sm-8">
                        <input value="{{Manufacturer}}" name="Manufacturer" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">型号：</label>
                    <div class="col-sm-8">
                        <input value="{{Model}}" name="Model" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">生产日期：</label>
                    <div class="col-sm-8">
                        <div class='input-group date addInput' id="changeProductTime">
                            <input value="{{productdate}}" name="productdate" type='text' class="form-control inputDate" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">安装日期：</label>
                    <div class="col-sm-8">
                        <div class='input-group date addInput' id="changeInstallTime">
                            <input value="{{setupdate}}" name="setupdate" type='text' class="form-control inputDate" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">所连控制器生产厂商：</label>
                    <div class="col-sm-8">
                        <input value="{{ControlorManufacture}}" name="ControlorManufacture" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">所连控制器型号：</label>
                    <div class="col-sm-8">
                        <input value="{{ControlorMode}}" name="ControlorMode" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 changeTransportDiv">
                    <label class="col-sm-4 control-label" for="dwbm">备注：</label>
                    <div class="col-sm-8">
                        <input value="{{memo}}" name="memo" type="text" class="addInput form-control"/>
                    </div>
                </div>
                {{/each}}
            </form>

        </div>
    </script>

    <!--点击添加的时候从后台取得数据渲染模态框-->
    <script id="addTransportData" type="text/html">
        <div class="row">
            <div class="form-group col-sm-12 addTransportEquipmentDiv">
                <label class="col-sm-4 control-label" for="dwbm">添加设备关联的系统：</label>
                <div class="col-sm-8">
                    <button type="button" type="button" id="modalAddBtn" class="myBtn">添加</button>
                </div>
            </div>
            <table class="table table-bordered" id="addTransportEquipmentTb">
                <tr>
                    <th>建筑物</th>
                    <th>系统</th>
                    <th>地址</th>
                    <th>操作</th>
                </tr>
                <tbody id="addTransportEquipmentTbody">

                </tbody>
            </table>
            <form enctype="multipart/form-data" id="addModalForm">
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">传输设备地址：</label>
                    <div class="col-sm-8">
                        <input name="Gatewayaddress" onkeyup="javascript:this.value=this.value.replace(/[^\d\.]/g,'')" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">生产厂商：</label>
                    <div class="col-sm-8">
                        <input name="Manufacturer" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">型号：</label>
                    <div class="col-sm-8">
                        <input name="Model" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">生产日期：</label>
                    <div class="col-sm-8">
                        <div class='input-group date addInput' id="productTime">
                            <input name="productdate" type='text' class="form-control inputDate" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">安装日期：</label>
                    <div class="col-sm-8">
                        <div class='input-group date addInput' id="installTime">
                            <input name="setupdate" type='text' class="form-control inputDate" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">所连控制器生产厂商：</label>
                    <div class="col-sm-8">
                        <input name="ControlorManufacture" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">所连控制器型号：</label>
                    <div class="col-sm-8">
                        <input name="ControlorMode" type="text" class="addInput form-control"/>
                    </div>
                </div>
                <div class="form-group col-sm-12 addTransportEquipmentDiv">
                    <label class="col-sm-4 control-label" for="dwbm">备注：</label>
                    <div class="col-sm-8">
                        <input name="memo" type="text" class="addInput form-control"/>
                    </div>
                </div>
            </form>

        </div>

    </script>

    <!--首页表格的渲染-->
    <script id="transportEquipmentData" type="text/html">
        {{#each DataBag.PageDatas}}
        <tr>
            <td>{{Gatewayaddress}}</td>
            <td>{{ynonline}}</td>
            <td>{{onlinetime}}</td>
            <td>{{Manufacturer}}</td>
            <td>{{ControlorManufacture}}</td>
            <td>{{ControlorMode}}</td>
            <td class="atBuildingSystem">

            </td>
            <td>
                <a Gatewayaddress="{{Gatewayaddress}}" class="operation" data-toggle="modal" data-target="">查看详情</a>
                <a Gatewayaddress="{{Gatewayaddress}}" class="operation" data-toggle="modal" data-target="">修改</a>
                <a Gatewayaddress="{{Gatewayaddress}}" class="operation" data-toggle="modal" data-target="">删除</a>
            </td>
        </tr>
        {{/each}}
    </script>


<!--公共js引用-->
<script type="text/javascript" src="../../js/config.js"></script>
<script type="text/javascript" src="../../js/common.js"></script>

<!--下面是引用的时间插件-->
<script type="text/javascript" src="../../plug/datepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="../../plug/datepicker/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>

<!--单页面js引用-->
<script type="text/javascript" src="../../js/FireUnit/TransportInformation.js"></script>
</body>
</html>