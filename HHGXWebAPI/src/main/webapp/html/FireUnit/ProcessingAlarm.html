<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>处理报警</title>

    <!-- 主要框架引用-->
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../fonts/icon/iconfont.css"/>
    <script type="text/javascript" src="../../js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/handlebars.js"></script>

    <!-- 公共样式引用-->
    <link rel="stylesheet" href="../../css/style.css"/>

    <!-- 单页面样式-->
    <link rel="stylesheet" href="../../css/FireUnit/ProcessingAlarm.css"/>

    <!--下面是时间的插件-->
    <link href="../../plug/datepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">

</head>
<body>

<div class="main_title">
    <a>远程监控</a>
    <span>></span>
    <a href="./ProcessingAlarm.html" class="titlt_active">警情管理</a>
</div>

<div class="container main_page">

    <div class="row">

        <div class="col-sm-12 page_title">
            <div>
                <span>警情管理</span>
                <!-- 顶部切换-->
                <div class="Pro_tab" data-on="0">
                    <div id="fireAlarm_btn">火警</div>
                    <div id="fault_btn">故障</div>
                    <div id="cover_btn">屏蔽</div>
                    <div id="watch_btn">监管</div>
                    <div id="start_btn">启动</div>
                    <div id="backInfo_btn">反馈</div>
                </div>
            </div>
        </div>

        <!-- 列表页面组-->
        <div class="col-sm-12 page_content" id="my_page">

            <div id="fireAlarm_page">
                <!-- 头部按钮组-->
                <div class="col-sm-12">
                    <form role="form" class="content_condition" id="fireAlarm_form">
                        <label>首次报警时间</label>

                        <div class='input-group date' id='fireAlarm_startDate'>
                            <input type='text' class="form-control inputDate" readonly/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>

                        <label>-</label>

                        <div class='input-group date' id='fireAlarm_stopDate'>
                            <input type='text' class="form-control inputDate" readonly/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>

                        <button type="button" class="myBtn" id="fireAlarm_check">查询</button>

                        <div style="float: right;width: 280px;margin-right: 0px">
                            <button type="button" class="myBtn alarmImgBtn" id="" style="margin-right: 20px">警情平面图</button>
                            <label id="fireAlarm_automatic"><input class="inputCheckBox" type="checkbox" checked="true"><span>自动刷新</span></label>
                            <button type="button" class="myBtn matic" style="margin-left: 10px">刷新</button>
                        </div>
                       <!-- <div style="float: right;width: 120px">
                            <button type="button" class="myBtn matic" style="margin-left: 10px">警情平面图</button>
                        </div>-->
                        <div style="clear: both"></div>

                        <div class="form-group col-sm-12" id="fireSelectBuildingDiv">
                            <label class="">选择建筑物</label>
                            <select id="firebuildingSelect" name="useproperty" class="selectpicker show-tick form-control" data-live-search="true">
                            </select>
                        </div>

                       <!-- <div class="form-group col-sm-12" id="firealarmTypeDiv">
                            <label>警情类型</label>
                            <select name="useproperty" class="selectpicker show-tick form-control" data-live-search="true">
                                <option value="真实火警">真实火警</option>
                                <option value="误报">误报</option>
                                <option value="测试">测试</option>
                            </select>
                        </div>-->
                    </form>

                </div>

                <div class="col-sm-12" style="min-height: 600px" id="fireAlarm_table"></div>

                <div class="col-sm-12 in_paging" style="text-align: center"></div>

            </div>

            <div id="fault_page">
                <!-- 头部按钮组-->
                <div class="col-sm-12">
                    <form role="form" class="content_condition" id="fault_form">
                        <label>首次故障时间</label>

                        <div class='input-group date' id='fault_startDate'>
                            <input type='text' class="form-control inputDate" readonly/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>

                        <label>-</label>

                        <div class='input-group date' id='fault_stopDate'>
                            <input type='text' class="form-control inputDate" readonly/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>

                        <button type="button" class="myBtn" id="fault_check">查询</button>

                        <div style="float: right;width: 280px;margin-right: 0px">
                            <button type="button" class="myBtn alarmImgBtn" style="margin-right: 20px">警情平面图</button>
                            <label id="fault_automatic"><input class="inputCheckBox" type="checkbox" checked="true"><span>自动刷新</span></label>
                            <button type="button" class="myBtn matic" style="margin-left: 10px">刷新</button>
                        </div>

                        <!--<div style="float: right;width: 120px">
                            <button type="button" class="myBtn matic" style="margin-left: 10px">警情平面图</button>
                        </div>-->
                        <div style="clear: both"></div>

                        <div class="form-group col-sm-12" id="faultSelectBuildingDiv">
                            <label class="">选择建筑物</label>
                            <select id="faultbuildingSelect" name="useproperty" class="selectpicker show-tick form-control" data-live-search="true">
                            </select>
                        </div>

                        <!--<div class="form-group col-sm-12" id="faultalarmTypeDiv">
                            <label>警情类型</label>
                            <select name="useproperty" class="selectpicker show-tick form-control" data-live-search="true">
                                <option value="真实火警">真实火警</option>
                                <option value="误报">误报</option>
                                <option value="测试">测试</option>
                            </select>
                        </div>-->
                    </form>

                </div>

                <div class="col-sm-12" style="min-height: 600px" id="fault_table"></div>

                <div class="col-sm-12 in_paging" style="text-align: center"></div>

            </div>

        </div>


    </div>
</div>

<!-- 模态框（点击位置显示平面图）-->
<div class="modal fade" id="imFlatPicModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog" id="imFlatPicModalDialog" style="width: 1000px;">
        <div class="modal-content" id="imFlatPicModelContent">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">修改</h4>
            </div>
            <div class="modal-body" id="imFlatPicModalBody" style="height: 630px">
                <div id="imFlatPicImgDiv">
                    <svg id="imFlatPicSvg" xmlns="http://www.w3.org/2000/svg" width="950" height="630">
                        <image id="imFlatPicImg" class="imgs" width="100%" height="100%" x="0" y="0" xlink:href="" src=""/>
                    </svg>
                </div>
                <button id="big" type="button" class="btn btn-default">+</button>
                <button id="small" type="button" class="btn btn-default">-</button>
            </div>
            <div class="modal-footer">
                <!--<button type="button" class="myBtn" id="imFlatPicModalConfirm">确定</button>-->
                <button type="button" class="myBtn" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 模态框（警情处理） -->
<div class="modal fade" id="alarmHandleModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">警情处理</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group col-sm-12 buildingForm">
                        <label class="col-sm-4" id="comfirmAlarm">确认警情：</label>
                        <div class="col-sm-8 checkboxInputDiv">
                            <div class="alarmDiv"><input type="radio" value="误报" class="alarm" name="alarm"/>误报</div>
                            <div class="alarmDiv"><input type="radio" value="真实火警" class="alarm" name="alarm"/>真实火警</div>
                            <div class="alarmDiv"><input type="radio" value="测试" class="alarm" name="alarm"/>测试</div>
                        </div>
                    </div>
                    <div class="form-group col-sm-12 buildingForm">
                        <label class="col-sm-4" id="writePapaer">填写故障处理单：</label>
                        <div class="col-sm-8 checkboxInputDiv">
                            <div><input type="radio" value="是" class="isWrite" name="isWrite"/>是</div>
                            <div><input type="radio" value="否" checked class="isWrite" name="isWrite"/>否</div>
                        </div>
                    </div>
                    <div class="form-group col-sm-12 buildingForm">
                        <label class="col-sm-4" id="statement">情况说明：</label>
                        <div class="col-sm-8 checkboxInputDiv">
                            <textarea id="statementInfo" rows="8" cols="35"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="myBtn" id="doAlarmHandleModal">确定</button>
                <button type="button" class="myBtn" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>


<script type="text/html" id="building_view">
    {{#each DataBag}}
    <option value="{{siteid}}">{{sitename}}</option>
    {{/each}}
</script>

<!--火警模板-->
<script type="text/html" id="fireAlarm_view">
    <table class="table table-striped table-hover main_table">
        <thead>
        <tr>
            <th>序号</th>
            <th>报警部件</th>
            <th>建筑</th>
            <th>楼层</th>
            <th>位置</th>
            <th>传输设备地址</th>
            <th>部件地址</th>
            <th>首次报警时间</th>
            <th>报警次数</th>
            <th>最近报警时间</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        {{#each data}}
        <tr>
            <td>{{number}}</td>
            <td><img src="../../image/origin/red.gif" alt=""/>{{DeviceTypeName}}</td>
            <td>{{sitename}}</td>
            <td class="fireFloor floor" imFlatPic="{{imFlatPic}}"><a class="operation">{{floornum}}</a></td>
            <td>{{location}}</td>
            <td>{{Gatewayaddress}}</td>
            <td>{{deviceaddress}}</td>
            <td>{{dFirstAlarmtime}}</td>
            <td>{{AlarmNum}}</td>
            <td>{{dRecentAlarmtime}}</td>
            <td>
                <button type="button" data-id="{{this.Firealarmid}}" class="handle_btn">查看详情</button>
                <button type="button" data-id="{{this.Firealarmid}}" class="handle_btn">处理</button>
            </td>
        </tr>
        {{/each}}
        </tbody>
    </table>
</script>
<!--故障模板-->
<script type="text/html" id="fault_view">
    <table class="table table-striped table-hover main_table">
        <thead>
        <tr>
            <th>序号</th>
            <th>报警部件</th>
            <th>建筑</th>
            <th>楼层</th>
            <th>位置</th>
            <th>传输设备地址</th>
            <th>部件地址</th>
            <th>首次报警时间</th>
            <th>报警次数</th>
            <th>最近报警时间</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        {{#each data}}
        <tr>
            <td>{{number}}</td>
            <td><img src="../../image/origin/yellow.gif" alt=""/>{{DeviceTypeName}}</td>
            <td>{{sitename}}</td>
            <td class="faultFloor floor" imFlatPic="{{imFlatPic}}"><a class="operation">{{floornum}}</a></td>
            <td>{{location}}</td>
            <td>{{Gatewayaddress}}</td>
            <td>{{deviceaddress}}</td>
            <td>{{dFirstAlarmtime}}</td>
            <td>{{AlarmNum}}</td>
            <td>{{dRecentAlarmtime}}</td>
            <td>
                <button type="button" data-id="{{this.Firealarmid}}" class="handle_btn">查看详情</button>
                <button type="button" data-id="{{this.Firealarmid}}" class="handle_btn">处理</button>
            </td>
        </tr>
        {{/each}}
        </tbody>
    </table>
</script>

<!--公共js引用-->
<script type="text/javascript" src="../../js/config.js"></script>
<script type="text/javascript" src="../../js/common.js"></script>

<!--下面是引用的时间插件-->
<script type="text/javascript" src="../../plug/datepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="../../plug/datepicker/js/bootstrap-datetimepicker.zh-CN.js"
        charset="UTF-8"></script>

<!--单页面js引用-->
<script type="text/javascript" src="../../js/FireUnit/ProcessingAlarm.js"></script>

</body>
</html>