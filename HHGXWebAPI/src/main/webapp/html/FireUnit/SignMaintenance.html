<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <!-- 主要框架引用-->
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../fonts/icon/iconfont.css"/>
    <script type="text/javascript" src="../../js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/handlebars.js"></script>

    <!-- 公共样式引用-->
    <link rel="stylesheet" href="../../css/style.css"/>

    <!-- 单页面样式-->
    <link rel="stylesheet" href="../../css/FireUnit/SignMaintenance.css"/>
</head>
<body>
<div class="main_title">
    <a>注册签约</a>
    <span>></span>
    <a href="./SignMaintenance.html" class="titlt_active">签约维保单位</a>
</div>
    <div class="container newMain_page">
        <div id="tableTitleDiv">
            <h3 id="tbh1" style="color: #4A90E2;">已签约维保单位</h3>
            <button type="button" class="myBtn" id="signCompany">签约维保单位</button>
        </div>
        <p id="alertUser">暂无签约信息，请先进行维保单位的添加</p>
        <table class="table table-bordered main_table fourTb" id="tb1">
            <thead>
                <tr>
                    <td>序号</td>
                    <td>维保单位名称</td>
                    <td>维护系统数量</td>
                    <td>维护的系统</td>
                    <td>操作</td>
                </tr>
            </thead>
            <tbody id="signAlready">

            </tbody>
        </table>

        <h3 id="tbh2" style="color: #4A90E2;">待通过维保单位</h3>
        <table class="table table-bordered main_table fourTb" id="tb2">
            <thead>
            <tr>
                <td>序号</td>
                <td>维保单位名称</td>
                <td>维护系统数量</td>
                <td>维护的系统</td>
                <td>操作</td>
            </tr>
            </thead>
            <tbody id="signWait">

            </tbody>
        </table>

        <h3 id="tbh3" style="color: #4A90E2;">待解约维保单位</h3>
        <table class="table table-bordered main_table fourTb" id="tb3">
            <thead>
                <tr>
                    <td>序号</td>
                    <td>维保单位名称</td>
                    <td>申请解约时间</td>
                    <td>操作</td>
                </tr>
            </thead>
            <tbody id="waitBreakOff">

            </tbody>
        </table>

        <h3 id="tbh4" style="color: #4A90E2;">已解约维保单位</h3>
        <table class="table table-bordered main_table fourTb" id="tb4">
            <thead>
            <tr>
                <td>序号</td>
                <td>维保单位名称</td>
                <td>解约时间</td>
            </tr>
            </thead>
            <tbody id="breakOff">

            </tbody>
        </table>
    </div>

    <!--取消申请-->
    <div class="modal fade" id="cancelAskModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">签约维保单位</h3>
                </div>
                <div class="modal-body" id="cancelAskBody">
                    <h3 style="text-align: center">您确定取消申请<span id="companyName"></span>公司作为维保单位？</h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="cancelAskModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--解约-->
    <div class="modal fade" id="breakOffModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">签约维保单位</h3>
                </div>
                <div class="modal-body" id="breakOffBody">
                    <h3 style="text-align: center">您确定向<span id="breakOffCompanyName"></span>公司提出解除维保关系？</h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="breakOffModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--已经签约维保单位详情-->
    <div class="modal fade" id="alreadySignDetailModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">维保单位名称-<span id="weibaoName"></span></h3>
                </div>
                <div class="modal-body" id="alreadySignDetailBody">

                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="myBtn" id="alreadySignDetailModalConfirm" data-dismiss="modal">确定</button>-->
                    <button type="button" class="myBtn" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!--已经签约维保单位编辑-->
    <div class="modal fade" id="alreadySignEditModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">维保单位名称-<span id="editWeibaoName"></span></h3>
                </div>
                <div class="modal-body" id="alreadySignEditBody">

                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="myBtn" id="alreadySignEditModalConfirm" data-dismiss="modal">确定</button>-->
                    <button type="button" class="myBtn" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!--已经签约维保单位新增维保系统-->
    <div class="modal fade" id="addSystemModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title"></h3>
                </div>
                <div class="modal-body" id="addSystemBody">
                    <div class="row">
                        <div class="form-group col-sm-12 buildingForm">
                            <label class="col-sm-3" for="jzdz">选择建筑物:</label>
                            <div class="col-sm-7">
                                <select id="buildingSelect" class="selectpicker show-tick form-control" data-live-search="true">
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-sm-12 buildingForm">
                            <label class="col-sm-3" for="jzdz">选择系统:</label>
                            <div class="col-sm-7">
                                <select id="systemSelect" class="selectpicker show-tick form-control" data-live-search="true">
                                </select>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="myBtn" id="addSystemModalConfirm">确定</button>
                    <button type="button" class="myBtn" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>

    <!--待通过维保单位详情-->
    <div class="modal fade" id="signWaitDetailModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">维保单位名称-<span id="signWaitWeibaoName"></span></h3>
                </div>
                <div class="modal-body" id="signWaitDetailBody">

                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="myBtn" id="signWaitDetailModalConfirm" data-dismiss="modal">确定</button>-->
                    <button type="button" class="myBtn" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

<!--后台数据渲染模板-->

<!--已解约维保单位-->
<script id="breakOffData" type="text/html">
    {{#each data}}
    <tr>
        <td>{{number}}</td>
        <td>{{UnitName}}</td>
        <td>{{ReviewTime}}</td>
    </tr>
    {{/each}}
</script>

<!--待解约维保单位-->
<script id="waitBreakOffData" type="text/html">
    {{#each data}}
    <tr>
        <td>{{number}}</td>
        <td>{{UnitName}}</td>
        <td>{{terminateTime}}</td>
        <td>
            <a UnitName="{{UnitName}}" MaintenanceId="{{MaintenanceId}}" class="operation alertDo">提醒处理</a>
        </td>
    </tr>
    {{/each}}
</script>

<!--已经签约维保单位编辑-->
<script id="alreadySignEditData" type="text/html">
    <div class="row">
        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">地址：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.Address}}" type="text" class="form-control inputText">
            </div>
        </div>

        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">联系方式：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.ContactMobilePhone}}" type="text" class="form-control inputText">
            </div>
        </div>
        <button type="button" id="addSystemBtn" class="myBtn" style="float: right;margin-right: 20px">新增维保系统</button>
    </div>
    <div style="height: 400px;overflow-y:auto;margin-top: 15px">
        <table class="table table-bordered" id="alreadySignEditTb">
            <thead>
            <tr>
                <th>序号</th>
                <th>系统名</th>
                <th>所在建筑</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            {{#each DataBag.vSysList}}
            <tr>
                <td>{{number}}</td>
                <td>{{vSysdesc}}</td>
                <td>{{sitename}}</td>
                <td><a siteid="{{siteid}}" tiSysType="{{tiSysType}}" class="operation">撤销维保</a></td>
            </tr>
            {{/each}}
            </tbody>

        </table>
    </div>

</script>

<!--已经签约维保单位详情-->
<script id="alreadySignDetailData" type="text/html">
    <div class="row">
        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">地址：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.Address}}" type="text" class="form-control inputText">
            </div>
        </div>

        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">联系方式：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.ContactMobilePhone}}" type="text" class="form-control inputText">
            </div>
        </div>
    </div>
    <div style="height: 400px;overflow-y:auto">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>序号</th>
                    <th>系统名</th>
                    <th>所在建筑</th>
                </tr>
            </thead>
            <tbody>
            {{#each DataBag.vSysList}}
            <tr>
                <td>{{number}}</td>
                <td>{{vSysdesc}}</td>
                <td>{{sitename}}</td>
            </tr>
            {{/each}}
            </tbody>

        </table>
    </div>

</script>

<!--已签约维保单位-->
<script id="signAlreadyData" type="text/html">
    {{#each data}}
    <tr>
        <td>{{number}}</td>
        <td>{{UnitName}}</td>
        <td>{{sysnumber}}</td>
        <td>{{vSysdesc}}</td>
        <td>
            <a MaintenanceId="{{MaintenanceId}}" class="operation">详情</a>
            <a MaintenanceId="{{MaintenanceId}}" class="operation">编辑</a>
            <a UnitName="{{UnitName}}" MaintenanceId="{{MaintenanceId}}" class="operation">解约</a>
        </td>
    </tr>
    {{/each}}
</script>

<!--待通过维保单位详情-->
<script id="signWaitDetailData" type="text/html">
    <div class="row">
        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">地址：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.Address}}" type="text" class="form-control inputText">
            </div>
        </div>

        <div class="form-group col-sm-12 baseInfo">
            <label class="col-sm-3 control-label" for="dwbm">联系方式：</label>
            <div class="col-sm-9">
                <input readonly  value="{{DataBag.ContactMobilePhone}}" type="text" class="form-control inputText">
            </div>
        </div>
    </div>
    <div style="height: 400px;overflow-y:auto">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>序号</th>
                <th>系统名</th>
                <th>所在建筑</th>
            </tr>
            </thead>
            <tbody>
            {{#each DataBag.vSysList}}
            <tr>
                <td>{{number}}</td>
                <td>{{vSysdesc}}</td>
                <td>{{sitename}}</td>
            </tr>
            {{/each}}
            </tbody>

        </table>
    </div>

</script>

<!--待通过维保单位-->
<script id="signWaitData" type="text/html">
    {{#each data}}
    <tr>
        <td>{{number}}</td>
        <td>{{UnitName}}</td>
        <td>{{sysnumber}}</td>
        <td>{{vSysdesc}}</td>
        <td>
            <a MaintenanceId="{{MaintenanceId}}" class="operation unPassDetail">详情</a>
            <a UnitName="{{UnitName}}" MaintenanceId="{{MaintenanceId}}" class="operation cancelAsk">取消申请</a>
        </td>
    </tr>
    {{/each}}
</script>


<!--公共js引用-->
<script type="text/javascript" src="../../js/config.js"></script>
<script type="text/javascript" src="../../js/common.js"></script>

<!--单页面js引用-->
<script type="text/javascript" src="../../js/FireUnit/SignMaintenance.js"></script>
</body>
</html>