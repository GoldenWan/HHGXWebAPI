<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hhgx.soft.mappers.UserManagerMapper">
	
	<select id="retrieveZtreeNodes" resultType="retrieveZtreeNodes">
	SELECT
		u.UserID userID,
		ut.UserTypeName userbelong,
		ut.UserBelongTo usertype,
		ml.ModuleName moduleName,
		mlz.ModuleID ModuleID,
		mlz.ModuleName ModuleNamez,
		mlz.URL URL
	FROM
		users u
	INNER JOIN usertype ut ON u.UserTypeID = ut.UserTypeID
	INNER JOIN module_usertype mt ON ut.UserTypeID = mt.UserTypeID
	INNER JOIN modulelist ml ON mt.ModuleID = ml.ModuleID
	INNER JOIN modulelist mlz ON ml.ParentID = mlz.ModuleID
	WHERE
		account = #{username};
	</select>
	
</mapper>